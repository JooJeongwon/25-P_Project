{
    "meta": {
        "description": "효드림(HyoDream) 백엔드 개발 세션 로그 및 프로젝트 상태 스냅샷",
        "project_name": "HyoDream Backend",
        "last_updated": "2025-12-12T14:30:00+09:00",
        "total_sessions_recorded": 4
    },
    "project_status": {
        "version": "1.3.7-SNAPSHOT",
        "current_phase": "Refining & Optimization",
        "tech_stack": [
            "Java 21",
            "Spring Boot 3.4.x",
            "Gradle",
            "MySQL 8.0",
            "Redis (Alpine)",
            "Docker & Docker Compose",
            "DevContainer"
        ],
        "architecture_style": "Modular Monolith (MSA Ready)",
        "active_modules": [
            "auth",
            "user",
            "product",
            "order",
            "payment",
            "global"
        ]
    },
    "context": {
        "architectural_decisions": [
            {
                "topic": "Structured Recommendation Response",
                "decision": "Return grouped JSON (Real-time, HealthGoal, Disease, AI)",
                "reason": "프론트엔드에서 섹션별(예: '당뇨 환우 추천')로 UI를 쉽게 구성할 수 있도록 응답 구조를 리스트에서 객체로 변경."
            },
            {
                "topic": "Explainable Recommendation",
                "decision": "Add 'reason' field and 'title' for sections",
                "reason": "섹션 제목과 개별 상품 사유를 제공하여 추천의 근거를 사용자에게 명확히 전달."
            },
            {
                "topic": "Real-time Interest Extraction Priority",
                "decision": "Prioritize Deduced Benefit > Tag > Category",
                "reason": "단순 카테고리(예: '루테인') 저장보다, 효능('눈 건강')을 저장하는 것이 추천 정확도를 높임. 매칭되는 효능이 있으면 최우선 반영."
            },
            {
                "topic": "AI Recommendation Strategy (RAG-like)",
                "decision": "Backend filters Candidates -> AI selects Top 5",
                "reason": "AI 환각 방지(존재하지 않는 ID 반환) 및 재고/판매상태 보장을 위해, 백엔드가 1차로 검증된 후보군(인기/신규)을 추출하여 AI에 전달하는 역방향 의존성 주입 방식 채택."
            }
        ],
        "key_directories": {
            "src/main/java/com/hyodream/backend/global": "Security, Config, Error Handling, Util",
            "src/main/java/com/hyodream/backend/auth": "Login, Signup (JWT)",
            "src/main/java/com/hyodream/backend/user": "MyPage, Health Info",
            "src/main/java/com/hyodream/backend/product": "Product CRUD, Recommendation, Naver Integration",
            "src/main/java/com/hyodream/backend/order": "Order, Cart",
            "src/main/java/com/hyodream/backend/payment": "Payment Processing"
        }
    },
    "current_session_log": {
        "session_id": "stabilization_and_optimization_v1",
        "start_timestamp": "2025-12-11T20:00:00+09:00",
        "end_timestamp": "2025-12-12T14:30:00+09:00",
        "goal": "시스템 안정화(버그 수정) 및 추천 품질 향상",
        "status": "In Progress"
    },
    "history": [
        {
            "date": "2025-12-02",
            "version_snapshot": "0.1.0",
            "importance": "High",
            "tags": ["setup", "infra"],
            "summary": "프로젝트 초기 설정 및 인프라 구축",
            "details": ["Spring Boot 3.4 + Java 21 프로젝트 생성", "DevContainer 및 Docker Compose (MySQL, Redis) 환경 구성"]
        },
        {
            "date": "2025-12-03",
            "version_snapshot": "0.3.0",
            "importance": "High",
            "tags": ["auth", "security", "jwt"],
            "summary": "회원가입 및 인증 시스템 구현",
            "details": ["Spring Security + JWT 기반 로그인/회원가입 구현", "Redis Refresh Token 저장 로직 적용"]
        },
        {
            "date": "2025-12-05",
            "version_snapshot": "0.7.0",
            "importance": "Critical",
            "tags": ["product", "recommendation", "redis-streams"],
            "summary": "상품 도메인 및 실시간 추천 시스템 구현",
            "details": ["상품 등록/조회/검색 API 구현", "Redis Streams 기반 클릭 이벤트 수집"]
        },
        {
            "date": "2025-12-08",
            "version_snapshot": "1.2.0",
            "importance": "High",
            "tags": ["search", "cache-aside", "logic-flow"],
            "summary": "하이브리드 통합 검색(Cache-Aside Pattern) 로직 완성",
            "details": ["SearchLog 도메인 구현", "Cache-Aside 알고리즘 적용: 검색 -> 로그확인 -> Import(필요시) -> DB조회"]
        },
        {
            "date": "2025-12-10",
            "version_snapshot": "1.3.0",
            "importance": "Critical",
            "tags": ["swagger", "recommendation", "db-optimization"],
            "summary": "추천 로직 고도화, DB 최적화, API 문서화 완성",
            "details": ["API 문서화(Swagger)", "추천 시스템 고도화(동병상련, 하이브리드)", "DB 최적화(Upsert, Scheduler)"]
        },
        {
            "date": "2025-12-11",
            "version_snapshot": "1.3.2",
            "importance": "High",
            "tags": ["recommendation", "refactor", "event-driven"],
            "summary": "실시간 추천 로직 고도화 (Category Detail Support)",
            "details": [
                "Real-time Rec: '세부 카테고리(예: 피자)' 반영",
                "EventController: 'productId' 기반 자동 카테고리 추출",
                "ProductRepository: 'findByKeywordInBenefitsOrCategories' 추가"
            ]
        },
        {
            "date": "2025-12-11",
            "version_snapshot": "1.3.5",
            "importance": "Critical",
            "tags": ["recommendation", "api-design", "ux"],
            "summary": "설명 가능한 섹션 기반 추천 시스템(Explainable Grouped Rec) 구현",
            "details": [
                "API Response Refactoring: List<Dto> -> RecommendationResponseDto (섹션별 그룹화)",
                "UX Improvement: 각 섹션에 'title'(추천 사유) 제공, 상품별 'reason' 필드 추가",
                "Logic Hardening: 실시간(4), 목표(2), 지병(2), AI(3) 할당량 보장 및 통합 중복 제거"
            ]
        },
        {
            "date": "2025-12-11",
            "version_snapshot": "1.3.6",
            "importance": "Critical",
            "tags": ["fix", "optimization", "refactor", "realtime-rec"],
            "summary": "안정성 확보(N+1, Transaction) 및 실시간 추천 정밀도 향상",
            "details": [
                "Fix: Naver API 404 Error (Controller 통합 및 제거)",
                "Fix: N+1 Issue (Fetch Join 적용: User 조회 시 알러지, Product 목록 조회 시 상세정보)",
                "Fix: Data Persistence Issue (UserService: Transactional, saveAndFlush, DTO JSON Key mismatch 해결)",
                "Feature: Real-time Rec Priority Logic (1순위: Category->Benefit 매칭, 2순위: Tag, 3순위: Category)",
                "Optimization: Recommendation Sort Order (Popularity + Recency)"
            ]
        },
        {
            "date": "2025-12-12",
            "version_snapshot": "1.3.7",
            "importance": "Critical",
            "tags": ["ai", "architecture", "rag"],
            "summary": "AI 추천 시스템 아키텍처 개편 (Hallucination 방지)",
            "details": [
                "Refactor: AI 추천 로직을 'DB Candidate Pool 주입 -> AI Selection' 방식(RAG-like)으로 변경",
                "New: AiRecommendationRequestDto 도입 (후보 상품 50개 전송)",
                "Docs: Swagger API 문서 업데이트 (AI 추천 로직 상세 설명 추가)"
            ]
        }
    ]
}